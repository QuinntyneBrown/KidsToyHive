{"ast":null,"code":"// Copyright (c) Quinntyne Brown. All Rights Reserved.\n// Licensed under the MIT License. See License.txt in the project root for license information.\nimport { ComponentPortal } from \"@angular/cdk/portal\";\nimport { Injector } from \"@angular/core\";\nimport { OverlayRefWrapper } from './overlay-ref-wrapper';\nexport class BaseOverlayService {\n  constructor(_injector, _overlayRefProvider, _component, _logger) {\n    this._injector = _injector;\n    this._overlayRefProvider = _overlayRefProvider;\n    this._component = _component;\n    this._logger = _logger;\n  }\n  create(options = {}) {\n    const overlayRef = this._overlayRefProvider.create();\n    const overlayRefWrapper = new OverlayRefWrapper(overlayRef, this._logger);\n    options.injectionTokens = options.injectionTokens || new WeakMap();\n    options.injectionTokens.set(OverlayRefWrapper, overlayRefWrapper);\n    const overlayComponent = this.attachOverlayContainer(overlayRef, options.injectionTokens);\n    Object.assign(overlayComponent, options.source);\n    return overlayRefWrapper.afterClosed();\n  }\n  attachOverlayContainer(overlayRef, injectionTokens) {\n    const injector = Injector.create({\n      parent: this._injector,\n      providers: Array.from(injectionTokens.entries()).map(([token, value]) => ({\n        provide: token,\n        useValue: value\n      }))\n    });\n    const overlayPortal = new ComponentPortal(this._component, null, injector);\n    const overlayPortalRef = overlayRef.attach(overlayPortal);\n    return overlayPortalRef.instance;\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}