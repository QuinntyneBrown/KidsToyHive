{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { BookingService, AuthService } from '../../../core';\nimport { takeUntil, map } from 'rxjs/operators';\nimport { Router } from '@angular/router';\nimport { baseUrl } from '../../../core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../core\";\nimport * as i2 from \"@angular/router\";\nfunction MyProfilePage_kth_my_booking_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElement(0, \"kth-my-booking\", 1);\n  }\n  if (rf & 2) {\n    const booking_r1 = ctx.$implicit;\n    i0.ɵɵdomProperty(\"booking\", booking_r1);\n  }\n}\nexport let MyProfilePage = /*#__PURE__*/(() => {\n  class MyProfilePage {\n    constructor(_baseUrl, _authService, _bookingService, _router) {\n      this._baseUrl = _baseUrl;\n      this._authService = _authService;\n      this._bookingService = _bookingService;\n      this._router = _router;\n      this.onDestroy = new Subject();\n    }\n    ngOnInit() {\n      this.bookings$ = this._bookingService.getMy().pipe(map(x => {\n        return x;\n      }));\n      this._authService.isAuthenticatedChanged$.pipe(takeUntil(this.onDestroy), map(x => {\n        if (!x) {\n          this._router.navigateByUrl('toys');\n        }\n      })).subscribe();\n    }\n    ngOnDestroy() {\n      this.onDestroy.next();\n    }\n    static {\n      this.ɵfac = function MyProfilePage_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MyProfilePage)(i0.ɵɵdirectiveInject(baseUrl), i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i1.BookingService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MyProfilePage,\n        selectors: [[\"kth-my-profile-page\"]],\n        decls: 6,\n        vars: 3,\n        consts: [[3, \"booking\", 4, \"ngFor\", \"ngForOf\"], [3, \"booking\"]],\n        template: function MyProfilePage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵdomElementStart(0, \"h1\");\n            i0.ɵɵtext(1, \"My Account\");\n            i0.ɵɵdomElementEnd();\n            i0.ɵɵdomElementStart(2, \"h2\");\n            i0.ɵɵtext(3, \"Recent Bookings\");\n            i0.ɵɵdomElementEnd();\n            i0.ɵɵdomTemplate(4, MyProfilePage_kth_my_booking_4_Template, 1, 1, \"kth-my-booking\", 0);\n            i0.ɵɵpipe(5, \"async\");\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵdomProperty(\"ngForOf\", i0.ɵɵpipeBind1(5, 1, ctx.bookings$));\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return MyProfilePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}