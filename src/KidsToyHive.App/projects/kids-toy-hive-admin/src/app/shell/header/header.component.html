<!-- Copyright (c) Quinntyne Brown. All Rights Reserved. -->
<!-- Licensed under the MIT License. See License.txt in the project root for license information. -->

<mat-toolbar class="app-header" color="primary">
  <!-- Menu Toggle Button -->
  <button
    mat-icon-button
    (click)="onMenuToggle()"
    aria-label="Toggle menu"
    matTooltip="Toggle menu">
    <mat-icon>menu</mat-icon>
  </button>

  <!-- Logo -->
  <div class="app-header__logo" (click)="onLogoClick()">
    <mat-icon class="app-header__logo-icon">toys</mat-icon>
    <span class="app-header__logo-text">KidsToyHive</span>
  </div>

  <span class="app-header__spacer"></span>

  <!-- Notifications (placeholder for future) -->
  <button
    mat-icon-button
    aria-label="Notifications"
    matTooltip="Notifications">
    <mat-icon [matBadge]="3" matBadgeColor="warn" matBadgeSize="small">notifications</mat-icon>
  </button>

  <!-- Theme Toggle -->
  <button
    mat-icon-button
    (click)="onThemeToggle()"
    [attr.aria-label]="isDarkTheme() ? 'Switch to light mode' : 'Switch to dark mode'"
    [matTooltip]="isDarkTheme() ? 'Light mode' : 'Dark mode'">
    <mat-icon>{{ isDarkTheme() ? 'light_mode' : 'dark_mode' }}</mat-icon>
  </button>

  <!-- User Menu -->
  <button
    mat-button
    [matMenuTriggerFor]="userMenu"
    class="app-header__user-menu-button"
    *ngIf="currentUser$ | async as user">
    <div class="app-header__user-avatar">{{ getUserInitials(user.name) }}</div>
    <span class="app-header__user-name">{{ user.name }}</span>
    <mat-icon>arrow_drop_down</mat-icon>
  </button>

  <mat-menu #userMenu="matMenu" class="app-header__user-menu">
    <div class="app-header__user-info" mat-menu-item disabled *ngIf="currentUser$ | async as user">
      <div class="app-header__user-details">
        <div class="app-header__user-details-name">{{ user.name }}</div>
        <div class="app-header__user-details-email">{{ user.email }}</div>
      </div>
    </div>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="onProfile()">
      <mat-icon>account_circle</mat-icon>
      <span>Profile</span>
    </button>
    <button mat-menu-item (click)="onSettings()">
      <mat-icon>settings</mat-icon>
      <span>Settings</span>
    </button>
    <button mat-menu-item (click)="onHelp()">
      <mat-icon>help</mat-icon>
      <span>Help</span>
    </button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="onLogout()">
      <mat-icon>logout</mat-icon>
      <span>Logout</span>
    </button>
  </mat-menu>
</mat-toolbar>
