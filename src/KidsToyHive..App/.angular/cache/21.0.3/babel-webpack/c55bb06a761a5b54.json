{"ast":null,"code":"// Copyright (c) Quinntyne Brown. All Rights Reserved.\n// Licensed under the MIT License. See License.txt in the project root for license information.\nvar _a;\nimport { __decorate, __metadata } from \"tslib\";\nimport { Subject } from 'rxjs';\nimport { Component } from \"@angular/core\";\nimport { FormControl, FormGroup, Validators, ReactiveFormsModule } from \"@angular/forms\";\nimport { AuthService } from '../../core/services/auth.service';\nimport { takeUntil, map } from 'rxjs/operators';\nimport { OverlayRefWrapper } from '../../core/overlay-ref-wrapper';\nimport { isProblemDetails } from '../../core/problem-details';\nimport { CommonModule } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { Button } from '../../components/button/button';\nlet LoginDialog = class LoginDialog {\n  constructor(_authService, _overlayRefWrapper) {\n    this._authService = _authService;\n    this._overlayRefWrapper = _overlayRefWrapper;\n    this.onDestroy = new Subject();\n    this.form = new FormGroup({\n      username: new FormControl(null, [Validators.required]),\n      password: new FormControl(null, [Validators.required])\n    });\n  }\n  close() {\n    this._overlayRefWrapper.close();\n  }\n  tryToLogin() {\n    if (this.form.valid) {\n      this._authService.tryToLogin({\n        username: this.form.value.username,\n        password: this.form.value.password\n      }).pipe(takeUntil(this.onDestroy), map(x => {\n        if (isProblemDetails(x)) {\n          this.errorMessage = 'Invalid Username or Password.';\n        } else {\n          this._overlayRefWrapper.close();\n        }\n      })).subscribe();\n    } else {\n      this.errorMessage = 'Missing required fields.';\n    }\n  }\n  ngOnDestroy() {\n    this.onDestroy.next();\n  }\n  handleInputFocus() {\n    this.errorMessage = '';\n  }\n};\nLoginDialog = __decorate([Component({\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule, MatIconModule, Button],\n  templateUrl: './login-dialog.html',\n  styleUrls: ['./login-dialog.scss'],\n  selector: 'kth-login-dialog'\n}), __metadata(\"design:paramtypes\", [typeof (_a = typeof AuthService !== \"undefined\" && AuthService) === \"function\" ? _a : Object, OverlayRefWrapper])], LoginDialog);\nexport { LoginDialog };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}