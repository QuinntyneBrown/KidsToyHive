{"ast":null,"code":"import { ActivatedRoute, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\nimport { LocalStorageService, accessTokenKey } from '../core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport let LoginRedirectService = /*#__PURE__*/(() => {\n  class LoginRedirectService {\n    constructor(_route, _router) {\n      this._route = _route;\n      this._router = _router;\n      this.loginUrl = '/login';\n      this.defaultPath = '/';\n    }\n    setLoginUrl(value) {\n      this.loginUrl = value;\n    }\n    setDefaultUrl(value) {\n      this.defaultPath = value;\n    }\n    redirectToLogin() {\n      this._router.navigate([this.loginUrl]);\n    }\n    redirectPreLogin() {\n      if (this.lastPath && this.lastPath !== this.loginUrl) {\n        this._router.navigate([this.lastPath]);\n        this.lastPath = '';\n      } else {\n        this._router.navigate([this.defaultPath]);\n      }\n    }\n    static {\n      this.ɵfac = function LoginRedirectService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || LoginRedirectService)(i0.ɵɵinject(i1.ActivatedRoute), i0.ɵɵinject(i1.Router));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: LoginRedirectService,\n        factory: LoginRedirectService.ɵfac\n      });\n    }\n  }\n  return LoginRedirectService;\n})();\nexport let AuthGuard = /*#__PURE__*/(() => {\n  class AuthGuard {\n    constructor(_localStorageService, _loginRedirectService, _router) {\n      this._localStorageService = _localStorageService;\n      this._loginRedirectService = _loginRedirectService;\n      this._router = _router;\n    }\n    canActivate(route, state) {\n      const token = this._localStorageService.get({\n        name: accessTokenKey\n      });\n      if (token) {\n        return true;\n      }\n      this._loginRedirectService.lastPath = state.url;\n      return this._router.parseUrl(this._loginRedirectService.loginUrl);\n    }\n    static {\n      this.ɵfac = function AuthGuard_Factory(__ngFactoryType__) {\n        i0.ɵɵinvalidFactory();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: AuthGuard,\n        factory: AuthGuard.ɵfac\n      });\n    }\n  }\n  return AuthGuard;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}